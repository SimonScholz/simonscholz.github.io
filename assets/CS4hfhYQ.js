import{ah as I,ai as L,G as F,r as E,aj as N,Q as A,$ as W,o as D,aa as q}from"./BzefTVgW.js";function T(e){return I()?(L(e),!0):!1}function h(e){return typeof e=="function"?e():F(e)}const S=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const G=e=>e!=null,B=Object.prototype.toString,$=e=>B.call(e)==="[object Object]",b=()=>{},z=Q();function Q(){var e,t;return S&&((e=window==null?void 0:window.navigator)==null?void 0:e.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((t=window==null?void 0:window.navigator)==null?void 0:t.maxTouchPoints)>2&&/iPad|Macintosh/.test(window==null?void 0:window.navigator.userAgent))}function V(e,t){function o(...n){return new Promise((a,r)=>{Promise.resolve(e(()=>t.apply(this,n),{fn:t,thisArg:this,args:n})).then(a).catch(r)})}return o}function H(e,t={}){let o,n,a=b;const r=s=>{clearTimeout(s),a(),a=b};return s=>{const d=h(e),l=h(t.maxWait);return o&&r(o),d<=0||l!==void 0&&l<=0?(n&&(r(n),n=null),Promise.resolve(s())):new Promise((i,p)=>{a=t.rejectOnCancel?p:i,l&&!n&&(n=setTimeout(()=>{o&&r(o),n=null,i(s())},l)),o=setTimeout(()=>{n&&r(n),n=null,i(s())},d)})}}function J(e){let t;function o(){return t||(t=e()),t}return o.reset=async()=>{const n=t;t=void 0,n&&await n},o}function ee(e,t=200,o={}){return V(H(t,o),e)}function K(e,t,o={}){const{immediate:n=!0}=o,a=E(!1);let r=null;function f(){r&&(clearTimeout(r),r=null)}function s(){a.value=!1,f()}function d(...l){f(),a.value=!0,r=setTimeout(()=>{a.value=!1,r=null,e(...l)},h(t))}return n&&(a.value=!0,S&&d()),T(s),{isPending:N(a),start:d,stop:s}}function g(e){var t;const o=h(e);return(t=o==null?void 0:o.$el)!=null?t:o}const P=S?window:void 0,R=S?window.navigator:void 0;function y(...e){let t,o,n,a;if(typeof e[0]=="string"||Array.isArray(e[0])?([o,n,a]=e,t=P):[t,o,n,a]=e,!t)return b;Array.isArray(o)||(o=[o]),Array.isArray(n)||(n=[n]);const r=[],f=()=>{r.forEach(i=>i()),r.length=0},s=(i,p,u,c)=>(i.addEventListener(p,u,c),()=>i.removeEventListener(p,u,c)),d=W(()=>[g(t),h(a)],([i,p])=>{if(f(),!i)return;const u=$(p)?{...p}:p;r.push(...o.flatMap(c=>n.map(v=>s(i,c,v,u))))},{immediate:!0,flush:"post"}),l=()=>{d(),f()};return T(l),l}let x=!1;function te(e,t,o={}){const{window:n=P,ignore:a=[],capture:r=!0,detectIframe:f=!1}=o;if(!n)return b;z&&!x&&(x=!0,Array.from(n.document.body.children).forEach(u=>u.addEventListener("click",b)),n.document.documentElement.addEventListener("click",b));let s=!0;const d=u=>a.some(c=>{if(typeof c=="string")return Array.from(n.document.querySelectorAll(c)).some(v=>v===u.target||u.composedPath().includes(v));{const v=g(c);return v&&(u.target===v||u.composedPath().includes(v))}}),i=[y(n,"click",u=>{const c=g(e);if(!(!c||c===u.target||u.composedPath().includes(c))){if(u.detail===0&&(s=!d(u)),!s){s=!0;return}t(u)}},{passive:!0,capture:r}),y(n,"pointerdown",u=>{const c=g(e);s=!d(u)&&!!(c&&!u.composedPath().includes(c))},{passive:!0}),f&&y(n,"blur",u=>{setTimeout(()=>{var c;const v=g(e);((c=n.document.activeElement)==null?void 0:c.tagName)==="IFRAME"&&!(v!=null&&v.contains(n.document.activeElement))&&t(u)},0)})].filter(Boolean);return()=>i.forEach(u=>u())}function U(){const e=E(!1),t=q();return t&&D(()=>{e.value=!0},t),e}function O(e){const t=U();return A(()=>(t.value,!!e()))}function X(e,t,o={}){const{window:n=P,...a}=o;let r;const f=O(()=>n&&"MutationObserver"in n),s=()=>{r&&(r.disconnect(),r=void 0)},d=A(()=>{const u=h(e),c=(Array.isArray(u)?u:[u]).map(g).filter(G);return new Set(c)}),l=W(()=>d.value,u=>{s(),f.value&&u.size&&(r=new MutationObserver(t),u.forEach(c=>r.observe(c,a)))},{immediate:!0,flush:"post"}),i=()=>r==null?void 0:r.takeRecords(),p=()=>{s(),l()};return T(p),{isSupported:f,stop:p,takeRecords:i}}function Y(e={}){var t;const{window:o=P,deep:n=!0,triggerOnRemoval:a=!1}=e,r=(t=e.document)!=null?t:o==null?void 0:o.document,f=()=>{var l;let i=r==null?void 0:r.activeElement;if(n)for(;i!=null&&i.shadowRoot;)i=(l=i==null?void 0:i.shadowRoot)==null?void 0:l.activeElement;return i},s=E(),d=()=>{s.value=f()};return o&&(y(o,"blur",l=>{l.relatedTarget===null&&d()},!0),y(o,"focus",d,!0)),a&&X(r,l=>{l.filter(i=>i.removedNodes.length).map(i=>Array.from(i.removedNodes)).flat().forEach(i=>{i===s.value&&d()})},{childList:!0,subtree:!0}),d(),s}function M(e,t={}){const{controls:o=!1,navigator:n=R}=t,a=O(()=>n&&"permissions"in n);let r;const f=typeof e=="string"?{name:e}:e,s=E(),d=()=>{r&&(s.value=r.state)},l=J(async()=>{if(a.value){if(!r)try{r=await n.permissions.query(f),y(r,"change",d),d()}catch{s.value="prompt"}return r}});return l(),o?{state:s,isSupported:a,query:l}:s}function ne(e={}){const{navigator:t=R,read:o=!1,source:n,copiedDuring:a=1500,legacy:r=!1}=e,f=O(()=>t&&"clipboard"in t),s=M("clipboard-read"),d=M("clipboard-write"),l=A(()=>f.value||r),i=E(""),p=E(!1),u=K(()=>p.value=!1,a);function c(){f.value&&_(s.value)?t.clipboard.readText().then(m=>{i.value=m}):i.value=k()}l.value&&o&&y(["copy","cut"],c);async function v(m=h(n)){l.value&&m!=null&&(f.value&&_(d.value)?await t.clipboard.writeText(m):j(m),i.value=m,p.value=!0,u.start())}function j(m){const w=document.createElement("textarea");w.value=m??"",w.style.position="absolute",w.style.opacity="0",document.body.appendChild(w),w.select(),document.execCommand("copy"),w.remove()}function k(){var m,w,C;return(C=(w=(m=document==null?void 0:document.getSelection)==null?void 0:m.call(document))==null?void 0:w.toString())!=null?C:""}function _(m){return m==="granted"||m==="prompt"}return{isSupported:l,text:i,copied:p,copy:v}}function oe(e,t={}){const o=Y(t),n=A(()=>g(e));return{focused:A(()=>n.value&&o.value?n.value.contains(o.value):!1)}}export{ee as a,oe as b,ne as c,te as o,T as t,g as u};
