{"_path":"/tutorials/gpg-archive-encryption","_dir":"tutorials","_draft":false,"_partial":false,"_locale":"","title":"Security - Encrypt and decrypt files with GPG","description":"Security - Tutorial about encrypting and decrypting files or archives using GPG.","id":"gpg-archive-encryption","path":"/tutorials/gpg-archive-encryption","created":"2022-01-09","updated":"2024-01-20","author":"Simon Scholz","tags":["gpg","tar","archive","encryption","security"],"vgWort":"vg08.met.vgwort.de/na/02907f362c054753bcd6be722b03301c","readingTime":{"text":"2 min read","minutes":1.145,"time":68700,"words":229},"body":{"type":"root","children":[{"type":"element","tag":"h2","props":{"id":"securing-your-files-with-gpg"},"children":[{"type":"text","value":"Securing your files with gpg"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"GPG or GnuPG is an open source software that let's you encrypt your files, which should be protected."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Please visit "},{"type":"element","tag":"a","props":{"href":"https://gnupg.org/","rel":["noopener","noreferer"],"target":"_blank"},"children":[{"type":"text","value":"https://gnupg.org/"}]},{"type":"text","value":" for more information."}]},{"type":"element","tag":"h2","props":{"id":"encrypt-single-file"},"children":[{"type":"text","value":"Encrypt single file"}]},{"type":"element","tag":"pre","props":{"className":"language-bash shiki shiki-themes github-light github-dark monokai","code":"gpg -cv --no-symkey-cache desired-file\n","language":"bash","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E"},"children":[{"type":"text","value":"gpg"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF"},"children":[{"type":"text","value":" -cv"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF"},"children":[{"type":"text","value":" --no-symkey-cache"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74"},"children":[{"type":"text","value":" desired-file\n"}]}]}]}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{},"children":[]},{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"gpg command parameter"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"-c"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"encryption only with symmetric cipher"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"-v"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"verbose (get more output)"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"--no-symkey-cache"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"do NOT cache the password"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Then you´ll be promted to enter a password.\nThis will result in a "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"desired-file.gpg"}]},{"type":"text","value":"  file, which can be decrypted again as follows:"}]},{"type":"element","tag":"pre","props":{"className":"language-bash shiki shiki-themes github-light github-dark monokai","code":"gpg --no-symkey-cache desired-file.gpg\n","language":"bash","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E"},"children":[{"type":"text","value":"gpg"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF"},"children":[{"type":"text","value":" --no-symkey-cache"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74"},"children":[{"type":"text","value":" desired-file.gpg\n"}]}]}]}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{},"children":[]},{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"gpg command parameter"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"--no-symkey-cache"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"do NOT cache the password"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In case you´d omit the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"--no-symkey-cache"}]},{"type":"text","value":" flag the given password will be cached in the gpg-agent\nand you won´t be promted for the password when decrypting the file."}]},{"type":"element","tag":"h2","props":{"id":"create-an-encrypted-archive"},"children":[{"type":"text","value":"Create an encrypted archive"}]},{"type":"element","tag":"pre","props":{"className":"language-bash shiki shiki-themes github-light github-dark monokai","code":"tar -cvzf - desired-directory | gpg -cv > encrypted-archive.tar.gz.gpg\n","language":"bash","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E"},"children":[{"type":"text","value":"tar"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF"},"children":[{"type":"text","value":" -cvzf"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74"},"children":[{"type":"text","value":" -"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74"},"children":[{"type":"text","value":" desired-directory"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D73A49;--shiki-dark:#F97583;--shiki-sepia:#F92672"},"children":[{"type":"text","value":" |"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E"},"children":[{"type":"text","value":" gpg"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF"},"children":[{"type":"text","value":" -cv"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D73A49;--shiki-dark:#F97583;--shiki-sepia:#F92672"},"children":[{"type":"text","value":" >"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74"},"children":[{"type":"text","value":" encrypted-archive.tar.gz.gpg\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This command basically creates a tar file containing the files in the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"desired-directory"}]},{"type":"text","value":" and due to "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":" this tar will be piped to the gpg command.\nThis gpg command will then take the piped tar and encrypt it and write the result into "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"encrypted-archive.tar.gz.gpg"}]},{"type":"text","value":"."}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{},"children":[]},{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"tar command parameter"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"-c"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"Is used to create an archive"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"-v"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"verbose (get more output)"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"-z"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"Compress the file for smaller size"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"-f"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"Specifies that the file name will be mentioned next"}]}]}]}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{},"children":[]},{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"gpg command parameter"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"-c"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"encryption only with symmetric cipher"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"-v"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"verbose (get more output)"}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"decrypt-and-decompress-a-gpg-protected-file"},"children":[{"type":"text","value":"Decrypt and decompress a gpg protected file"}]},{"type":"element","tag":"pre","props":{"className":"language-bash shiki shiki-themes github-light github-dark monokai","code":"gpg -dv encrypted-archive.tar.gz.gpg | tar -xvzf -\n","language":"bash","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E"},"children":[{"type":"text","value":"gpg"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF"},"children":[{"type":"text","value":" -dv"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74"},"children":[{"type":"text","value":" encrypted-archive.tar.gz.gpg"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D73A49;--shiki-dark:#F97583;--shiki-sepia:#F92672"},"children":[{"type":"text","value":" |"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E"},"children":[{"type":"text","value":" tar"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF"},"children":[{"type":"text","value":" -xvzf"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74"},"children":[{"type":"text","value":" -\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"gpg -dv encrypted-archive.tar.gz.gpg"}]},{"type":"text","value":" will cause a prompt, which asks for the password and then extracts the archive."}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{},"children":[]},{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"gpg command parameter"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"-d"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"stands for decrypt"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"-v"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"verbose (get more output)"}]}]}]}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{},"children":[]},{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"tar command parameter"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"-x"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"Extract the archive"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"-v"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"verbose (get more output)"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"-z"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"Decompress the archive"}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"-f"}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"Where to put the file/files"}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"sources"},"children":[{"type":"text","value":"Sources"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://gnupg.org/","rel":["noopener","noreferer"],"target":"_blank"},"children":[{"type":"text","value":"https://gnupg.org/"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://www.bsi.bund.de/DE/Themen/Unternehmen-und-Organisationen/Informationen-und-Empfehlungen/Freie-Software/E-Mail-Verschluesselung/GPG4Win/gpg4win_node.html","rel":["noopener","noreferer"],"target":"_blank"},"children":[{"type":"text","value":"https://www.bsi.bund.de/DE/Themen/Unternehmen-und-Organisationen/Informationen-und-Empfehlungen/Freie-Software/E-Mail-Verschluesselung/GPG4Win/gpg4win_node.html"}]}]}]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":"html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}html.sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}"}]}],"toc":{"title":"","searchDepth":3,"depth":3,"links":[{"id":"securing-your-files-with-gpg","depth":2,"text":"Securing your files with gpg"},{"id":"encrypt-single-file","depth":2,"text":"Encrypt single file"},{"id":"create-an-encrypted-archive","depth":2,"text":"Create an encrypted archive"},{"id":"decrypt-and-decompress-a-gpg-protected-file","depth":2,"text":"Decrypt and decompress a gpg protected file"},{"id":"sources","depth":2,"text":"Sources"}]}},"_type":"markdown","_id":"content:tutorials:gpg-archive-encryption.md","_source":"content","_file":"tutorials/gpg-archive-encryption.md","_stem":"tutorials/gpg-archive-encryption","_extension":"md"}