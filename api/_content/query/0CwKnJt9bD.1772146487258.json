{"_path":"/tutorials/gatsby-github-pages-action","_dir":"tutorials","_draft":false,"_partial":false,"_locale":"","title":"GitHub Pages with Gatsby built by GitHub Actions","description":"Explains how to setup GitHub page with Gatsby and how to auto-deploy it using GitHub actions","id":"gatsby-github-pages-action","path":"/tutorials/gatsby-github-pages-action","created":"2020-11-22","updated":"2020-11-22","author":"Simon Scholz","tags":["github","github pages","github actions","gatsby","react"],"vgWort":"vg08.met.vgwort.de/na/f5e063ab95074fc4b76502abb3a8bc40","readingTime":{"text":"4 min read","minutes":3.88,"time":232800,"words":776},"body":{"type":"root","children":[{"type":"element","tag":"h2","props":{"id":"github-pages"},"children":[{"type":"text","value":"GitHub Pages"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You can create your custom GitHub Page by creating the following repository: \"your-github-name\".github.io, e.g., simonscholz.github.io.\nOnce you created this repository you can simply push an index.html file or whatever webpage content you like to the master branch of the repository.\nThis webpage will then be displayed when hitting \"your-github-name\".github.io, e.g., simonscholz.github.io, with your browser."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This feature is often used to provide a website for the project, which is being hosted on GitHub.\nBut I use this for my personal homepage."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Also see "},{"type":"element","tag":"a","props":{"href":"https://pages.github.com/","rel":["noopener","noreferer"],"target":"_blank"},"children":[{"type":"text","value":"https://pages.github.com/"}]},{"type":"text","value":" for more information about GitHub pages."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"As you might already guess, this website can be found here: "},{"type":"element","tag":"a","props":{"href":"https://github.com/SimonScholz/simonscholz.github.io","rel":["noopener","noreferer"],"target":"_blank"},"children":[{"type":"text","value":"https://github.com/SimonScholz/simonscholz.github.io"}]},{"type":"text","value":"\nThe source code resides in the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"source"}]},{"type":"text","value":" branch and the actual site will be automatically build once I push something to the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"source"}]},{"type":"text","value":" branch.\nAfter that build to build result can be found in the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"master"}]},{"type":"text","value":" branch."}]},{"type":"element","tag":"h2","props":{"id":"steps-to-reproduce"},"children":[{"type":"text","value":"Steps to reproduce"}]},{"type":"element","tag":"h3","props":{"id":"create-the-repository"},"children":[{"type":"text","value":"Create the repository"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Create a new public repository called \"your-github-name\".github.io and GitHub will also tell you that this repo is special."}]},{"type":"element","tag":"h3","props":{"id":"clone-the-repo-and-create-a-source-branch"},"children":[{"type":"text","value":"Clone the repo and create a source branch"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Go to your new repository and copy the clone url:"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"clone-gh-page-repo","src":"/tutorials/gatsby-github-pages-action/clone-gh-page-repo.png"},"children":[]}]},{"type":"element","tag":"pre","props":{"className":"language-bash shiki shiki-themes github-light github-dark monokai","code":"git clone git@github.com:<your-github-name>/<your-github-name>.github.io.git\n\ne.g.\n\ngit clone git@github.com:SimonScholz/simonscholz.github.io.git\n","language":"bash","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E"},"children":[{"type":"text","value":"git"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74"},"children":[{"type":"text","value":" clone"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74"},"children":[{"type":"text","value":" git@github.com:"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D73A49;--shiki-dark:#F97583;--shiki-sepia:#F92672"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74"},"children":[{"type":"text","value":"your-github-nam"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":"e"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D73A49;--shiki-dark:#F97583;--shiki-sepia:#F92672"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74"},"children":[{"type":"text","value":"/"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D73A49;--shiki-dark:#F97583;--shiki-sepia:#F92672"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74"},"children":[{"type":"text","value":"your-github-nam"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":"e"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D73A49;--shiki-dark:#F97583;--shiki-sepia:#F92672"},"children":[{"type":"text","value":">"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74"},"children":[{"type":"text","value":".github.io.git\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E"},"children":[{"type":"text","value":"e.g.\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E"},"children":[{"type":"text","value":"git"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74"},"children":[{"type":"text","value":" clone"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74"},"children":[{"type":"text","value":" git@github.com:SimonScholz/simonscholz.github.io.git\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Creating the source branch works like this:"}]},{"type":"element","tag":"pre","props":{"className":"language-bash shiki shiki-themes github-light github-dark monokai","code":"git checkout -b source\n","language":"bash","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E"},"children":[{"type":"text","value":"git"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74"},"children":[{"type":"text","value":" checkout"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF"},"children":[{"type":"text","value":" -b"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74"},"children":[{"type":"text","value":" source\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In the repository you can setup your website using gatsby."}]},{"type":"element","tag":"h3","props":{"id":"create-a-gatsby-starter-project"},"children":[{"type":"text","value":"Create a Gatsby starter project"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"As a quick start you can install the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"gatsby-cli"}]},{"type":"text","value":" globally by running:"}]},{"type":"element","tag":"pre","props":{"className":"language-bash shiki shiki-themes github-light github-dark monokai","code":"npm install -g gatsby-cli\n\nor\n\nyarn global add gatsby-cli\n","language":"bash","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E"},"children":[{"type":"text","value":"npm"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74"},"children":[{"type":"text","value":" install"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF"},"children":[{"type":"text","value":" -g"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74"},"children":[{"type":"text","value":" gatsby-cli\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E"},"children":[{"type":"text","value":"or\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E"},"children":[{"type":"text","value":"yarn"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74"},"children":[{"type":"text","value":" global"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74"},"children":[{"type":"text","value":" add"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74"},"children":[{"type":"text","value":" gatsby-cli\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This assumes that you've already installed npm or yarn."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Then in the repository folder you can create a Gatsby starter project by calling "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"gatsby new gatsby-site https://github.com/gatsbyjs/gatsby-starter-hello-world"}]},{"type":"text","value":" inside your repository."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Once this is done you can call "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"gatsby develop"}]},{"type":"text","value":" and navigate to "},{"type":"element","tag":"a","props":{"href":"http://localhost:8000","rel":["noopener","noreferer"],"target":"_blank"},"children":[{"type":"text","value":"http://localhost:8000"}]},{"type":"text","value":" to see the page."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Feel free to modify this starter project or even build a proper page according to your needs.\nYou'll find plenty of good docs, tutorials and examples on "},{"type":"element","tag":"a","props":{"href":"https://www.gatsbyjs.com/","rel":["noopener","noreferer"],"target":"_blank"},"children":[{"type":"text","value":"https://www.gatsbyjs.com/"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h3","props":{"id":"github-action-to-automatically-deploy-your-gatsby-website"},"children":[{"type":"text","value":"Github action to automatically deploy your Gatsby website"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You already know that the contents of the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"master"}]},{"type":"text","value":" branch will be used as source for your GitHub Pages website.\nTo avoid building your Gatsby locally by using the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"gatsby build"}]},{"type":"text","value":" command and pushing the result to the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"master"}]},{"type":"text","value":" branch over and over again, you can utilize GitHub actions to automate these steps."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Therefore create a "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"./github/workflows"}]},{"type":"text","value":" folder inside the repo on the source branch, which contains a "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"main.yml"}]},{"type":"text","value":" with the following contents:"}]},{"type":"element","tag":"pre","props":{"className":"language-yaml shiki shiki-themes github-light github-dark monokai","code":"# Name of the action\nname: ðŸš€ Deploy website\n\n# Controls when the action will run.\n# In this case the actions will be run when pushing to the source branch of your repository\non:\n  push:\n    branches: [source]\n\n# A workflow run is made up of one or more jobs that can run sequentially or in parallel\njobs:\n  # This workflow contains a single job called \"build\"\n  build:\n    # The type of runner that the job will run on\n    runs-on: ubuntu-latest\n\n    # Steps represent a sequence of tasks that will be executed as part of the job\n    steps:\n      # Checks-out your repository under $GITHUB_WORKSPACE, so your job can access it\n      - uses: actions/checkout@v2\n\n      - name: Gatsby Publish\n        uses: enriikke/gatsby-gh-pages-action@v2.1.1\n        with:\n          # A personal access token needed to push your site after it has been built.\n          access-token: ${{ secrets.ACCESS_TOKEN }}\n          # The branch expected by GitHub to have the static files needed for your site.\n          deploy-branch: master\n          # Additional arguments that get passed to `gatsby build`.\n          gatsby-args: --verbose\n","language":"yaml","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A737D;--shiki-dark:#6A737D;--shiki-sepia:#88846F"},"children":[{"type":"text","value":"# Name of the action\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#22863A;--shiki-dark:#85E89D;--shiki-sepia:#F92672"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74"},"children":[{"type":"text","value":"ðŸš€ Deploy website\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A737D;--shiki-dark:#6A737D;--shiki-sepia:#88846F"},"children":[{"type":"text","value":"# Controls when the action will run.\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A737D;--shiki-dark:#6A737D;--shiki-sepia:#88846F"},"children":[{"type":"text","value":"# In this case the actions will be run when pushing to the source branch of your repository\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF"},"children":[{"type":"text","value":"on"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":":\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#22863A;--shiki-dark:#85E89D;--shiki-sepia:#F92672"},"children":[{"type":"text","value":"  push"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":":\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#22863A;--shiki-dark:#85E89D;--shiki-sepia:#F92672"},"children":[{"type":"text","value":"    branches"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":": ["}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74"},"children":[{"type":"text","value":"source"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":"]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A737D;--shiki-dark:#6A737D;--shiki-sepia:#88846F"},"children":[{"type":"text","value":"# A workflow run is made up of one or more jobs that can run sequentially or in parallel\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#22863A;--shiki-dark:#85E89D;--shiki-sepia:#F92672"},"children":[{"type":"text","value":"jobs"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":":\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A737D;--shiki-dark:#6A737D;--shiki-sepia:#88846F"},"children":[{"type":"text","value":"  # This workflow contains a single job called \"build\"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#22863A;--shiki-dark:#85E89D;--shiki-sepia:#F92672"},"children":[{"type":"text","value":"  build"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":":\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A737D;--shiki-dark:#6A737D;--shiki-sepia:#88846F"},"children":[{"type":"text","value":"    # The type of runner that the job will run on\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#22863A;--shiki-dark:#85E89D;--shiki-sepia:#F92672"},"children":[{"type":"text","value":"    runs-on"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74"},"children":[{"type":"text","value":"ubuntu-latest\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A737D;--shiki-dark:#6A737D;--shiki-sepia:#88846F"},"children":[{"type":"text","value":"    # Steps represent a sequence of tasks that will be executed as part of the job\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#22863A;--shiki-dark:#85E89D;--shiki-sepia:#F92672"},"children":[{"type":"text","value":"    steps"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":":\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A737D;--shiki-dark:#6A737D;--shiki-sepia:#88846F"},"children":[{"type":"text","value":"      # Checks-out your repository under $GITHUB_WORKSPACE, so your job can access it\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":"      - "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#22863A;--shiki-dark:#85E89D;--shiki-sepia:#F92672"},"children":[{"type":"text","value":"uses"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74"},"children":[{"type":"text","value":"actions/checkout@v2\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":"      - "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#22863A;--shiki-dark:#85E89D;--shiki-sepia:#F92672"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74"},"children":[{"type":"text","value":"Gatsby Publish\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":23},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#22863A;--shiki-dark:#85E89D;--shiki-sepia:#F92672"},"children":[{"type":"text","value":"        uses"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74"},"children":[{"type":"text","value":"enriikke/gatsby-gh-pages-action@v2.1.1\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":24},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#22863A;--shiki-dark:#85E89D;--shiki-sepia:#F92672"},"children":[{"type":"text","value":"        with"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":":\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":25},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A737D;--shiki-dark:#6A737D;--shiki-sepia:#88846F"},"children":[{"type":"text","value":"          # A personal access token needed to push your site after it has been built.\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":26},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#22863A;--shiki-dark:#85E89D;--shiki-sepia:#F92672"},"children":[{"type":"text","value":"          access-token"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74"},"children":[{"type":"text","value":"${{ secrets.ACCESS_TOKEN }}\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":27},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A737D;--shiki-dark:#6A737D;--shiki-sepia:#88846F"},"children":[{"type":"text","value":"          # The branch expected by GitHub to have the static files needed for your site.\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":28},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#22863A;--shiki-dark:#85E89D;--shiki-sepia:#F92672"},"children":[{"type":"text","value":"          deploy-branch"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74"},"children":[{"type":"text","value":"master\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":29},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A737D;--shiki-dark:#6A737D;--shiki-sepia:#88846F"},"children":[{"type":"text","value":"          # Additional arguments that get passed to `gatsby build`.\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":30},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#22863A;--shiki-dark:#85E89D;--shiki-sepia:#F92672"},"children":[{"type":"text","value":"          gatsby-args"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74"},"children":[{"type":"text","value":"--verbose\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The contents of the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"main.yml"}]},{"type":"text","value":" file runs the jobs when pushing to the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"source"}]},{"type":"text","value":" branch.\nFirst the code of the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"source"}]},{"type":"text","value":" branch will be checked out and thanks to "},{"type":"element","tag":"a","props":{"href":"https://github.com/enriikke/gatsby-gh-pages-action","rel":["noopener","noreferer"],"target":"_blank"},"children":[{"type":"text","value":"https://github.com/enriikke/gatsby-gh-pages-action"}]},{"type":"text","value":" the Gatsby website will be built and then pushed to the master branch."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Your "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"main.yml"}]},{"type":"text","value":" file can also contain secret variables, like "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"${{ secrets.ACCESS_TOKEN }}"}]},{"type":"text","value":" for providing an access token."}]},{"type":"element","tag":"h3","props":{"id":"personal-access-token-with-push-repository-rights"},"children":[{"type":"text","value":"Personal access token with push repository rights"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"gatsby-gh-pages-action"}]},{"type":"text","value":" needs access to your repository in order to be able to push to the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"master"}]},{"type":"text","value":" branch.\nPersonal access tokens can be created by navigating here: "},{"type":"element","tag":"a","props":{"href":"https://github.com/settings/tokens","rel":["noopener","noreferer"],"target":"_blank"},"children":[{"type":"text","value":"https://github.com/settings/tokens"}]},{"type":"text","value":" or by using the UI to your accounts "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"settings > developer settings > Personal access tokens"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"personal access token settings","src":"/tutorials/gatsby-github-pages-action/personal-access-token.png"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"After hitting the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Generate new token"}]},{"type":"text","value":" button you can enter a note and select proper scopes for the rights granted for the access token."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"generate personal access token","src":"/tutorials/gatsby-github-pages-action/generate-access-token.png"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Assuming that the repo is public the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"public_repo"}]},{"type":"text","value":" scope should be sufficient."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Then just hit the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Generate token"}]},{"type":"text","value":" button and copy the access token."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"generated personal access token","src":"/tutorials/gatsby-github-pages-action/generated-access-token.png"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Make sure to copy this token in a save place, because you won't be able to see it any more after refreshing the page."}]},{"type":"element","tag":"h3","props":{"id":"using-the-access-token-in-the-build-file"},"children":[{"type":"text","value":"Using the access token in the build file"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Instead of directly pasting the generated personal access token into the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"main.yml"}]},{"type":"text","value":" file, you'd rather save it securely so that nobody can make use of it.\nThat's where repository secrets come into play."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"repository secret","src":"/tutorials/gatsby-github-pages-action/repository-secret.png"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"After clicking on the "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"New repository secret"}]},{"type":"text","value":" button you can give the enter a name and a value.\nTo be compliant with the given "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"main.yml"}]},{"type":"text","value":" file the name should be "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"ACCESS_TOKEN"}]},{"type":"text","value":" and the value has to be the personal access token, which was generated and copied earlier."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Congrats! After all these steps your Gatsby website will be build automatically when pushing to the source branch and then be deployed to the master branch."}]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":"html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}html.sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}"}]}],"toc":{"title":"","searchDepth":3,"depth":3,"links":[{"id":"github-pages","depth":2,"text":"GitHub Pages"},{"id":"steps-to-reproduce","depth":2,"text":"Steps to reproduce","children":[{"id":"create-the-repository","depth":3,"text":"Create the repository"},{"id":"clone-the-repo-and-create-a-source-branch","depth":3,"text":"Clone the repo and create a source branch"},{"id":"create-a-gatsby-starter-project","depth":3,"text":"Create a Gatsby starter project"},{"id":"github-action-to-automatically-deploy-your-gatsby-website","depth":3,"text":"Github action to automatically deploy your Gatsby website"},{"id":"personal-access-token-with-push-repository-rights","depth":3,"text":"Personal access token with push repository rights"},{"id":"using-the-access-token-in-the-build-file","depth":3,"text":"Using the access token in the build file"}]}]}},"_type":"markdown","_id":"content:tutorials:gatsby-github-pages-action:index.md","_source":"content","_file":"tutorials/gatsby-github-pages-action/index.md","_stem":"tutorials/gatsby-github-pages-action/index","_extension":"md"}